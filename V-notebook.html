<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>City Edge Developments</title>
  <link rel="stylesheet" href="CSS/style.css">

</head>

<body>
  <!-- Navbar -->
  <div class="navbar">
    <img src="imgs/logo.jpg" alt="nav-logo">
    <h2>Forces Plus - Mazarine</h2>
  </div>
  <div class="box">
    <h2>Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¯ÙØ§ØªØ±  VILLA</h2>

    <select id="point">
      <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†Ù‚Ø·Ø©</option>
      <option value="Ù…Ù† 1 Ø§Ù„Ù‰ 40">Ù…Ù† 1 Ø§Ù„Ù‰ 40</option>
      <option value="Ù…Ù† 41 Ø§Ù„Ù‰ 60">Ù…Ù† 41 Ø§Ù„Ù‰ 60</option>
      <option value="Ù…Ù† 61 Ø§Ù„Ù‰ 98">Ù…Ù† 61 Ø§Ù„Ù‰ 98</option>
    </select>

    <input type="file" id="file" accept="image/*">
    <button onclick="uploadImage()">Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©</button>

    <p id="status" style="margin-top:10px; font-weight:bold;"></p>
  </div>

  <div class="app-footer">
      <a href="index.html" class="home-btn">
        <span class="home-icon">ğŸšï¸</span>
      </a>
    </div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbwo1jrhmFNFyrMCONeXI4s2Hqc3VKSelWBkMFa1niP0e4SGwu3xw1tZOEQDFcgaJWYt/exec";
const SECTOR = "VILLA";

async function uploadImage() {
  const point = document.getElementById("point").value.trim();
  const fileInput = document.getElementById("file");
  const status = document.getElementById("status");

  if (!point) return status.textContent = "âš ï¸ Ø§Ø®ØªØ± Ø§Ù„Ù†Ù‚Ø·Ø© Ø£ÙˆÙ„Ø§Ù‹";
  if (!fileInput.files.length) return status.textContent = "âš ï¸ Ø§Ø®ØªØ± ØµÙˆØ±Ø©";

  const file = fileInput.files[0];
  status.textContent = "â³ Ø¬Ø§Ø±Ù Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©...";

  const reader = new FileReader();
  reader.onload = async (e) => {
    const base64Data = e.target.result.split(",")[1];
    const now = new Date();
    const timestamp = now.toISOString().slice(0, 19).replace("T", "_").replace(/:/g, "-");
    const newFileName = `${SECTOR}_${point}_${timestamp}.jpg`;

    const body = JSON.stringify({
      sectorName: SECTOR,
      pointName: point,
      fileName: newFileName,
      fileData: base64Data
    });

    try {
      await fetch(API_URL, {
        method: "POST",
        mode: "no-cors", // âœ… Ø§Ù„Ø­Ù„ Ø§Ù„Ø³Ø­Ø±ÙŠ
        headers: { "Content-Type": "application/json" },
        body
      });

      status.textContent = "âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­";
      fileInput.value = "";
    } catch (err) {
      console.error(err);
      status.textContent = "âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±";
    }
  };

  reader.readAsDataURL(file);
}

  </script>
</body>

</html>