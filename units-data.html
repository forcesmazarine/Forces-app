<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ÙØ±ÙˆØ´Ø©</title>
    <style>
        body {
            background: #111;
            color: #fff;
            font-family: "Cairo", sans-serif;
            text-align: center;
            padding: 20px;
        }

        h1 {
            margin-bottom: 20px;
        }

        .unit-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 20px;
            direction: rtl;
        }

        .unit-item {
            position: relative;
        }

        input[type="checkbox"] {
            display: none;
        }

        label {
            background: #222;
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            display: block;
            transition: 0.3s;
        }

        input:checked+label {
            background: #00b894;
            color: #fff;
            box-shadow: 0 0 10px #00b894;
        }

        button {
            margin-top: 25px;
            padding: 12px 30px;
            background: #00b894;
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            transition: 0.3s;
        }

        button:hover {
            background: #019870;
        }
    </style>
</head>

<body dir="rtl">
  <h1>ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ÙØ±ÙˆØ´Ø©</h1>
  <div id="units-container" class="units-grid"></div>
  <button onclick="submitData()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>



    <script>
        // Ø±Ø§Ø¨Ø· Google Apps Script
        const sheetURL = "https://script.google.com/macros/s/AKfycbxd02oM4G_e8gcLCSXD0YxVcqAXmO57gf0SIDaH31YfLGPZKXivtuRZIfo0Y-h9om2Wnw/exec";

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ù…Ù† V-1 Ø¥Ù„Ù‰ V-98
        function generateUnits() {
            const container = document.getElementById("units-container");
            container.innerHTML = "";
            for (let i = 1; i <= 98; i++) {
                const unitId = `V-${i}`;
                const wrapper = document.createElement("div");
                wrapper.className = "unit-box";

                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.id = unitId;
                checkbox.value = unitId;

                const label = document.createElement("label");
                label.setAttribute("for", unitId);
                label.textContent = unitId;

                wrapper.appendChild(checkbox);
                wrapper.appendChild(label);
                container.appendChild(wrapper);
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø´Ø±Ù ÙˆØ§Ù„Ø´ÙŠØª
        async function submitData() {
            const selected = [...document.querySelectorAll("input[type=checkbox]:checked")].map(cb => cb.value);
            if (selected.length === 0) {
                alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ÙˆØ­Ø¯Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");
                return;
            }

            try {
                const response = await fetch(sheetURL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ furnishedUnits: selected })
                });

                const result = await response.json();
                console.log("Result:", result);
                alert(result.message || "âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
            } catch (error) {
                console.error("Error while submitting:", error);
                alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            }
        }

        // Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener("DOMContentLoaded", () => {
            generateUnits();
        });
    </script>

</body>

</html>